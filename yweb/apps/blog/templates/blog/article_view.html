<%inherit file="blog_base.html"/>

<%block name="subcontent">
<div class="container">
  <div class="row">

    <div class="col-md-9">

      <div class="article-view">
        <div class="panel panel-default">
          <div class="panel-heading">
            <strong class="article-title">${ article.title }</strong>
          </div>
          <div class="panel-body">

            <div>
              % for tag in article.tags:
              <span class="tag">${ tag.tag.name }</span>
              % endfor
            </div>
            <div class="article-view-baseinfo row">
              <div class="col-md-6">
                <table>
                  <tbody>
                    <tr>
                      <th>${ _("ID") }</th>
                      <td>${ article.id }</td>
                    </tr>
                    <tr>
                      <th>${ _("Status") }</th>
                      <td>${ article.status }</td>
                    </tr>
                    <tr>
                      <th>${ _("Created") }</th>
                      <td>${ ftime(article.created) }</td>
                    </tr>
                    <tr>
                      <th>${ _("Updated") }</th>
                      <td>${ ftime(article.updated) }</td>
                    </tr>
                  </tbody>
                </table>
              </div>
              <div class="col-md-6">
                <table>
                  <tbody>
                    <tr>
                      <th>${ _("Vote Up") }</th>
                      <td>${ article.vote_up }</td>
                    </tr>
                    <tr>
                      <th>${ _("Vote Down") }</th>
                      <td>${ article.vote_down }</td>
                    </tr>
                    <tr>
                      <th>${ _("View Count") }</th>
                      <td>${ article.view_count }</td>
                    </tr>
                    <tr>
                      <th>${ _("Post Count") }</th>
                      <td>${ article.post_count }</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>

            ${ article.body_html }
          </div>
        </div>

        <div class="blog-post-container">

          <% purl = reverse_url('blog:article:post:all', article.id) %>
          <ul class="nav nav-pills">
            <li class="active"><a href="${ reverse_url('blog:article:post:all', article.id) }">${ _("The hottest Reply") }</a></li>
            <li><a href="${ urlupdate(purl, 'order_by', 'updated') }">${ _("Latest reply") }</a></li>
            <li><a href="${ urlupdate2(purl, {'order_by':'created', 'asc': 1}) }">${ _("The earliest Reply") }</a></li>
          </ul>

          % if post_total:
          % for post in article.posts:
          <div class="panel panel-default blog-post-item">
            <div class="panel-heading">
              <a href="${ reverse_url('user', post.user.uid) }"><img class="img-circle" src="${ post.user.avatar_xs_url }"/></a>
              <span class="username">${ post.user.nickname }</span>
            </div>
            <div class="panel-body">
              <p class="datetime">
                ${ _("Updated") }
                ${ ftime(post.updated) }
              </p>
              ${ post.body_html }
            </div>
          </div>
          % endfor
          % else:
          <div class="big-center">
            <h3 class="text-warning">${ _("No posts yet.") }</h3>
          </div>
          % endif
        </div>
      </div>
    </div><!-- End col-md-9 -->

    <div class="col-md-3 blog-sidebar-container">

      <div class="panel panel-default">
        <div class="panel-heading">
          <h2 class="title">${ _("About Author") }</h2>
        </div>
        <div class="panel-body">
          <div class="user-avatar text-center">
            <a href="${ reverse_url('user', article.user.uid) }"><img class="user-logo-img" src="${ article.user.avatar_lg_url }" alt="Avatar" /></a>
            <p class="username">${ article.user.nickname }</p>
          </div>
        </div>

        <div class="list-group">
          <a href="${ reverse_url('user', article.user.uid) }" class="list-group-item"><i class="fa fa-home"></i> ${ _("Author Homepage") }</a>
          <a href="#" class="list-group-item"><i class="fa fa-envelope-o"></i> ${ _("Contact Me") }</a>
        </div>
      </div>

    </div><!-- End col-md-3 -->

  </div><!-- End row -->
</div><!-- End user-container-->

<script>
// active main menu
$('#site-entry-blog').addClass('active');

var url = window.location;
// Will only work if string in href matches with location
$('.list-group a[href="'+ url +'"]').addClass('active');

// Will also work for relative and absolute hrefs
$('.list-group a').filter(function() {
    return this.href == url;
}).addClass('active');
</script>
</%block>
